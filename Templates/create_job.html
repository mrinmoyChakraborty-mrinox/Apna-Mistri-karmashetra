{% extends "base.html" %}
{% block content %}
    <meta charset="UTF-8">
    <title>Create Job Request</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/create_job.css') }}">

<body>

<section class="glass-container">

    <!-- Back Link -->
    <div class="back-link">
        <button type="button" id="backBtn">‚Üê Back to Worker Portfolio</button>
    </div>

    <!-- Title -->
    <div class="page-header">
        <h2>Create Job Request</h2>
        
    </div>

    <!-- Floating Worker Mini Card -->
    <div class="worker-mini-card">

        <img src="../static/images/worker-photo.jpeg"
             alt="Worker Photo"
             class="worker-mini-img">

        <div class="worker-mini-info">
            <h4 id="workerNameDisplay">worker name</h4>
            <span class="worker-skill">job type</span>
        </div>

    </div>


    <!-- FORM START -->
    <form method="POST"
          action="/create-job"
          enctype="multipart/form-data"
          id="createJobForm">

        <input type="hidden" name="worker_id" id="workerId">

        <!-- ================= TWO COLUMN TOP SECTION ================= -->
        <div class="form-grid">

            <!-- LEFT COLUMN -->
            <div class="left-column">

                <!-- Job Title -->
                <div class="form-group">
                    <label for="jobTitle">Job Title</label>
                    <select name="job_title" id="jobTitle" required>
                        <option value="Plumbing">Plumbing</option>
                        <option value="Electrical">Electrical</option>
                        <option value="Carpentry">Carpentry</option>
                        <option value="Painting">Painting</option>
                        <option value="AC Repair">AC Repair</option>
                        <option value="Other">Other</option>
                    </select>

                    <input type="text"
                           name="custom_job_title"
                           id="customJobTitle"
                           placeholder="Enter custom job title"
                           class="hidden-field">
                </div>

                <!-- Description -->
                <div class="form-group">
                    <label for="description">Description</label>
                    <textarea name="description"
                              id="description"
                              maxlength="500"
                              placeholder="Describe the issue..."
                              required></textarea>

                    <div class="char-counter">
                        <span id="charCount">0</span> / 500
                    </div>
                </div>

                <!-- Preferred Date -->
                <div class="form-group">
                    <label for="preferredDate">Preferred Date</label>
                    <input type="date"
                           name="preferred_date"
                           id="preferredDate"
                           required>
                </div>

            </div>


            <!-- RIGHT COLUMN -->
            <div class="right-column">

                <!-- Preferred Time -->
                <div class="form-group">
                    <label for="timeSlot">Preferred Time Slot</label>
                    <select name="preferred_time"
                            id="timeSlot"
                            required>
                        <option value="9AM - 12PM">9AM - 12PM</option>
                        <option value="12PM - 3PM">12PM - 3PM</option>
                        <option value="3PM - 6PM">3PM - 6PM</option>
                        <option value="6PM - 9PM">6PM - 9PM</option>
                        <option value="Other">Other</option>
                    </select>

                    <input type="text"
                           name="custom_time_slot"
                           id="customTimeSlot"
                           placeholder="Enter preferred time"
                           class="hidden-field">
                </div>

                <!-- Location -->
                <div class="form-group">
                    <label for="jobLocation">Job Location</label>

                    <input type="text"
                           name="location"
                           id="jobLocation"
                           placeholder="Auto-filled from profile"
                           required>

                    <button type="button"
                            id="editLocationBtn"
                            class="edit-location-btn">
                        Edit Location
                    </button>
                </div>

            </div>

        </div>


        <!-- ================= UPLOAD SECTION ================= -->
        <div class="upload-section">

            <h3>Upload ‚ÄúBefore Work‚Äù Photos (Optional)</h3>
            <p class="upload-subtext">
                Helps verify genuine jobs. Upload 1‚Äì5 images of the issue before work.
            </p>

            <div class="upload-area" id="uploadArea">

                <input type="file"
                       name="photos"
                       id="photoInput"
                       multiple
                       accept="image/*">

                <div class="upload-inner">
                    <div class="upload-icons">
                        <span class="camera-icon">üì∑</span>
                        <span class="doc-icon">üìÑ</span>
                    </div>

                    <p>Drag & Drop Photos Here</p>
                    <span>or Click to Upload</span>
                </div>

            </div>

            <div id="photoPreview" class="photo-preview-grid"></div>

            <div class="photo-count">
                <span id="photoCount">0</span> / 5 photos uploaded
            </div>

        </div>


        <!-- ================= BUDGET & AGREEMENT ================= -->
        <div class="budget-section">

            <div class="form-group">
                <label for="budgetInput">Expected Budget (Optional)</label>
                <input type="number"
                       name="budget"
                       id="budgetInput"
                       placeholder="‚Çπ Enter amount">
            </div>

            <div class="form-group">
                <label for="notes">Notes for Worker (Optional)</label>
                <textarea name="notes"
                          id="notes"
                          placeholder="Additional notes..."></textarea>
            </div>

            <div class="agreement-row">
                <input type="checkbox"
                       name="agreement"
                       id="agreementCheck"
                       required>
                <label for="agreementCheck">
                    I agree to allow this job to be reviewed after completion
                </label>
            </div>

        </div>

        <!-- Submit -->
        <div class="submit-section">
            <button type="submit"
                    id="submitBtn"
                    disabled>
                Create Job & Send Request
            </button>
        </div>

    </form>

</section>

<script src="{{ url_for('static', filename='js/create_job.js') }}"></script>

</body>
{% endblock %}